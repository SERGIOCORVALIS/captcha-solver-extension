import{j as e,r as a,c as t,R as n}from"../chunks/vendor-react-CTA_hUR7.js";import{S as c}from"../chunks/storage-api-D2PSaRT8.js";import{a as s}from"../chunks/validation-BOSWQZSo.js";import"../chunks/vendor-DeDGuXn-.js";const i=({tabs:a,activeTab:t,onTabChange:n})=>e.jsx("div",{className:"tab-navigation",children:a.map(a=>e.jsx("button",{onClick:()=>n(a.id),className:"tab-button "+(t===a.id?"active":""),children:a.label},a.id))});function l(e){if(!e||0===e.trim().length)return!1;try{return new RegExp(e.replace(/\*/g,".*")),!0}catch{return!1}}const r=()=>{const[t,n]=a.useState(null),[r,o]=a.useState(!0),[d,h]=a.useState(!1),[p,v]=a.useState("general"),[g,u]=a.useState({});a.useEffect(()=>{x()},[]);const x=async()=>{try{const e=await c.getConfig();n(e)}catch(e){console.error("Error loading config:",e)}finally{o(!1)}},j=e=>{t&&n({...t,...e})};return r?e.jsx("div",{className:"options-container",children:"Loading..."}):t?e.jsxs("div",{className:"options-container",children:[e.jsx("h1",{children:"CAPTCHA Solver Settings"}),e.jsx(i,{tabs:[{id:"general",label:"General"},{id:"captcha",label:"CAPTCHA Types"},{id:"api",label:"API Settings"},{id:"advanced",label:"Advanced"},{id:"statistics",label:"Statistics"}],activeTab:p,onTabChange:v}),g&&Object.keys(g).length>0&&e.jsx("div",{className:"error-messages",children:Object.values(g).map((a,t)=>e.jsx("div",{className:"error-message",children:a},t))}),"general"===p&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h2",{children:"General"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.enabled,onChange:e=>j({enabled:e.target.checked})}),"Enable extension"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.autoSolve,onChange:e=>j({autoSolve:e.target.checked})}),"Auto-solve CAPTCHAs"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.hideUI,onChange:e=>j({hideUI:e.target.checked})}),"Hide CAPTCHA UI during solving"]})]}),"captcha"===p&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h2",{children:"CAPTCHA Types"}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.captchaTypes.recaptchaV2,onChange:e=>j({captchaTypes:{...t.captchaTypes,recaptchaV2:e.target.checked}})}),"reCAPTCHA v2"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.captchaTypes.recaptchaV3,onChange:e=>j({captchaTypes:{...t.captchaTypes,recaptchaV3:e.target.checked}})}),"reCAPTCHA v3"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.captchaTypes.hcaptcha,onChange:e=>j({captchaTypes:{...t.captchaTypes,hcaptcha:e.target.checked}})}),"hCaptcha"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.captchaTypes.turnstile,onChange:e=>j({captchaTypes:{...t.captchaTypes,turnstile:e.target.checked}})}),"Cloudflare Turnstile"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.captchaTypes.imageCaptcha,onChange:e=>j({captchaTypes:{...t.captchaTypes,imageCaptcha:e.target.checked}})}),"Image CAPTCHA"]})]}),"api"===p&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h2",{children:"API Configuration"}),e.jsxs("label",{children:["Provider:",e.jsxs("select",{value:t.apiConfig.provider,onChange:e=>j({apiConfig:{...t.apiConfig,provider:e.target.value}}),children:[e.jsx("option",{value:"2captcha",children:"2Captcha"}),e.jsx("option",{value:"anticaptcha",children:"AntiCaptcha"}),e.jsx("option",{value:"capsolver",children:"CapSolver"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("label",{children:["API Key:",e.jsx("input",{type:"password",value:t.apiConfig.apiKey,onChange:e=>j({apiConfig:{...t.apiConfig,apiKey:e.target.value}}),placeholder:"Enter your API key"}),g.apiKey&&e.jsx("span",{style:{color:"red",fontSize:"12px"},children:g.apiKey})]}),"custom"===t.apiConfig.provider&&e.jsxs("label",{children:["Custom Endpoint:",e.jsx("input",{type:"text",value:t.apiConfig.endpoint||"",onChange:e=>{const a=e.target.value;j({apiConfig:{...t.apiConfig,endpoint:a}}),a&&(s(a)?u(e=>{const a={...e};return delete a.endpoint,a}):u(e=>({...e,endpoint:"Invalid URL format"})))},placeholder:"https://api.example.com/solve"}),g.endpoint&&e.jsx("span",{style:{color:"red",fontSize:"12px"},children:g.endpoint})]})]}),"advanced"===p&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h2",{children:"Advanced"}),e.jsxs("label",{children:["Click Delay (ms):",e.jsx("input",{type:"number",value:t.advanced.clickDelay,onChange:e=>j({advanced:{...t.advanced,clickDelay:parseInt(e.target.value)||500}}),min:"0"})]}),e.jsxs("label",{children:["Solve Delay (ms):",e.jsx("input",{type:"number",value:t.advanced.solveDelay,onChange:e=>j({advanced:{...t.advanced,solveDelay:parseInt(e.target.value)||1e3}}),min:"0"})]}),e.jsxs("label",{children:["Retry Attempts:",e.jsx("input",{type:"number",value:t.advanced.retryAttempts,onChange:e=>j({advanced:{...t.advanced,retryAttempts:parseInt(e.target.value)||3}}),min:"0"})]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.advanced.enableLogging,onChange:e=>j({advanced:{...t.advanced,enableLogging:e.target.checked}})}),"Enable logging"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.advanced.mouseMovement,onChange:e=>j({advanced:{...t.advanced,mouseMovement:e.target.checked}})}),"Simulate mouse movement"]}),e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.advanced.humanLikeBehavior,onChange:e=>j({advanced:{...t.advanced,humanLikeBehavior:e.target.checked}})}),"Human-like behavior"]})]}),"statistics"===p&&e.jsxs("div",{className:"settings-section",children:[e.jsx("h2",{children:"Statistics"}),e.jsxs("p",{children:["Total Solved: ",t.statistics.totalSolved]}),e.jsxs("p",{children:["Errors: ",t.statistics.errors]}),e.jsx("button",{onClick:async()=>{await c.resetStatistics(),x()},children:"Reset Statistics"})]}),e.jsx("div",{className:"save-section",children:e.jsx("button",{onClick:async()=>{if(!t)return;const e=function(e){const a=[];var t;return!e.apiConfig?.apiKey||(t=e.apiConfig.apiKey)&&0!==t.trim().length&&t.trim().length>=20||a.push("Invalid API key format"),e.advanced&&(e.advanced.clickDelay<0&&a.push("Click delay must be non-negative"),e.advanced.solveDelay<0&&a.push("Solve delay must be non-negative"),e.advanced.retryAttempts<0&&a.push("Retry attempts must be non-negative")),e.whitelist&&e.whitelist.forEach((e,t)=>{l(e)||a.push(`Invalid whitelist pattern at index ${t}: ${e}`)}),e.blacklist&&e.blacklist.forEach((e,t)=>{l(e)||a.push(`Invalid blacklist pattern at index ${t}: ${e}`)}),{valid:0===a.length,errors:a}}(t);if(!e.valid)return u(e.errors.reduce((e,a,t)=>(e[`error_${t}`]=a,e),{})),void alert("Configuration validation failed:\n"+e.errors.join("\n"));u({});try{await c.updateConfig(t),h(!0),setTimeout(()=>h(!1),2e3)}catch(a){console.error("Error saving config:",a),alert("Failed to save configuration")}},className:"save-button",children:d?"Saved!":"Save Settings"})})]}):e.jsx("div",{className:"options-container",children:"Failed to load configuration"})},o=document.getElementById("root");o&&t.createRoot(o).render(e.jsx(n.StrictMode,{children:e.jsx(r,{})}));
