import{j as s,r as e,c as a,R as t}from"../chunks/vendor-react-CTA_hUR7.js";import{C as l,S as i}from"../chunks/storage-api-CX7cJf58.js";import"../chunks/vendor-DeDGuXn-.js";const c=({enabled:e,size:a="medium"})=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`${{small:"w-2 h-2",medium:"w-3 h-3",large:"w-4 h-4"}[a]} rounded-full ${e?"bg-green-500":"bg-gray-400"} animate-pulse`}),s.jsx("span",{className:"text-sm text-gray-600",children:e?"Active":"Inactive"})]}),n=({statistics:e})=>{const a={[l.RECAPTCHA_V2]:"reCAPTCHA v2",[l.RECAPTCHA_V3]:"reCAPTCHA v3",[l.HCAPTCHA]:"hCaptcha",[l.TURNSTILE]:"Turnstile",[l.IMAGE_CAPTCHA]:"Image",[l.UNKNOWN]:"Unknown"},t=Object.entries(e.byType).filter(([s,e])=>e>0);return s.jsxs("div",{className:"statistics-container",children:[s.jsx("div",{className:"statistics-header",children:s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Statistics"})}),s.jsxs("div",{className:"statistics-grid",children:[s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-value",children:e.totalSolved}),s.jsx("div",{className:"stat-label",children:"Total Solved"})]}),s.jsxs("div",{className:"stat-card",children:[s.jsx("div",{className:"stat-value text-red-600",children:e.errors}),s.jsx("div",{className:"stat-label",children:"Errors"})]})]}),t.length>0&&s.jsxs("div",{className:"statistics-breakdown mt-4",children:[s.jsx("h4",{className:"text-sm font-medium mb-2 text-gray-700",children:"By Type:"}),s.jsx("div",{className:"space-y-1",children:t.map(([e,t])=>s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:[a[e],":"]}),s.jsx("span",{className:"font-medium",children:t})]},e))})]}),e.lastSolved&&s.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["Last solved: ",new Date(e.lastSolved).toLocaleString()]})]})},r=()=>{const[a,t]=e.useState(null),[l,r]=e.useState(!0);e.useEffect(()=>{d()},[]);const d=async()=>{try{const s=await i.getConfig();t(s)}catch(s){console.error("Error loading config:",s)}finally{r(!1)}};return l?s.jsx("div",{className:"popup-container",children:s.jsx("div",{className:"loading",children:"Loading..."})}):a?s.jsxs("div",{className:"popup-container",children:[s.jsx("div",{className:"popup-header",children:s.jsx("h1",{children:"CAPTCHA Solver"})}),s.jsxs("div",{className:"popup-content",children:[s.jsxs("div",{className:"status-section mb-4",children:[s.jsx(c,{enabled:a.enabled,size:"medium"}),s.jsxs("label",{className:"toggle-label mt-2",children:[s.jsx("input",{type:"checkbox",checked:a.enabled,onChange:async()=>{if(!a)return;const s={...a,enabled:!a.enabled};await i.updateConfig(s),t(s)},className:"toggle-input"}),s.jsx("span",{className:"toggle-text",children:a.enabled?"Enabled":"Disabled"})]})]}),s.jsx(n,{statistics:a.statistics}),s.jsx("div",{className:"mt-4 space-y-2",children:s.jsx("button",{onClick:()=>{chrome.runtime.openOptionsPage()},className:"options-button w-full",children:"Open Settings"})})]})]}):s.jsx("div",{className:"popup-container",children:s.jsx("div",{className:"error",children:"Failed to load configuration"})})},d=document.getElementById("root");d&&a.createRoot(d).render(s.jsx(t.StrictMode,{children:s.jsx(r,{})}));
